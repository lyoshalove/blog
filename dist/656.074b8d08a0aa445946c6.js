"use strict";(self.webpackChunkwebpack=self.webpackChunkwebpack||[]).push([[656],{4656:(e,n,a)=>{a.r(n),a.d(n,{default:()=>F});var r,t=a(5893),o=a(7294),l=a(3409),i=a(933),u=a(3115),c=a(5998),s=a(5161),d=a(9698),f=a(9887);!function(e){e.INCORRECT_USER_DATA="INCORRECT_USER_DATA",e.INCORRECT_AGE="INCORRECT_AGE",e.INCORRECT_COUNTRY="INCORRECT_COUNTRY",e.NO_DATA="NO_DATA",e.SERVER_ERROR="SERVER_ERROR"}(r||(r={}));var v=a(7168),p=(0,v.hg)("profile/fetchProfileData",(function(e,n){return a=void 0,r=void 0,o=function(){var e,a,r,t;return function(e,n){var a,r,t,o,l={label:0,sent:function(){if(1&t[0])throw t[1];return t[1]},trys:[],ops:[]};return o={next:i(0),throw:i(1),return:i(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function i(i){return function(u){return function(i){if(a)throw new TypeError("Generator is already executing.");for(;o&&(o=0,i[0]&&(l=0)),l;)try{if(a=1,r&&(t=2&i[0]?r.return:i[0]?r.throw||((t=r.return)&&t.call(r),0):r.next)&&!(t=t.call(r,i[1])).done)return t;switch(r=0,t&&(i=[2&i[0],t.value]),i[0]){case 0:case 1:t=i;break;case 4:return l.label++,{value:i[1],done:!1};case 5:l.label++,r=i[1],i=[0];continue;case 7:i=l.ops.pop(),l.trys.pop();continue;default:if(!((t=(t=l.trys).length>0&&t[t.length-1])||6!==i[0]&&2!==i[0])){l=0;continue}if(3===i[0]&&(!t||i[1]>t[0]&&i[1]<t[3])){l.label=i[1];break}if(6===i[0]&&l.label<t[1]){l.label=t[1],t=i;break}if(t&&l.label<t[2]){l.label=t[2],l.ops.push(i);break}t[2]&&l.ops.pop(),l.trys.pop();continue}i=n.call(e,l)}catch(e){i=[6,e],r=0}finally{a=t=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,u])}}}(this,(function(o){switch(o.label){case 0:e=n.extra,a=n.rejectWithValue,o.label=1;case 1:return o.trys.push([1,3,,4]),[4,e.api.get("profile")];case 2:if(!(r=o.sent()).data)throw new Error("error");return[2,r.data];case 3:return t=o.sent(),console.log(t),[2,a("error")];case 4:return[2]}}))},new((t=void 0)||(t=Promise))((function(e,n){function l(e){try{u(o.next(e))}catch(e){n(e)}}function i(e){try{u(o.throw(e))}catch(e){n(e)}}function u(n){var a;n.done?e(n.value):(a=n.value,a instanceof t?a:new t((function(e){e(a)}))).then(l,i)}u((o=o.apply(a,r||[])).next())}));var a,r,t,o})),h=function(e){var n;return null===(n=e.profile)||void 0===n?void 0:n.form},m=(0,v.hg)("profile/updateProfileData",(function(e,n){return a=void 0,t=void 0,l=function(){var e,a,t,o,l,i,u;return function(e,n){var a,r,t,o,l={label:0,sent:function(){if(1&t[0])throw t[1];return t[1]},trys:[],ops:[]};return o={next:i(0),throw:i(1),return:i(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function i(i){return function(u){return function(i){if(a)throw new TypeError("Generator is already executing.");for(;o&&(o=0,i[0]&&(l=0)),l;)try{if(a=1,r&&(t=2&i[0]?r.return:i[0]?r.throw||((t=r.return)&&t.call(r),0):r.next)&&!(t=t.call(r,i[1])).done)return t;switch(r=0,t&&(i=[2&i[0],t.value]),i[0]){case 0:case 1:t=i;break;case 4:return l.label++,{value:i[1],done:!1};case 5:l.label++,r=i[1],i=[0];continue;case 7:i=l.ops.pop(),l.trys.pop();continue;default:if(!((t=(t=l.trys).length>0&&t[t.length-1])||6!==i[0]&&2!==i[0])){l=0;continue}if(3===i[0]&&(!t||i[1]>t[0]&&i[1]<t[3])){l.label=i[1];break}if(6===i[0]&&l.label<t[1]){l.label=t[1],t=i;break}if(t&&l.label<t[2]){l.label=t[2],l.ops.push(i);break}t[2]&&l.ops.pop(),l.trys.pop();continue}i=n.call(e,l)}catch(e){i=[6,e],r=0}finally{a=t=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,u])}}}(this,(function(c){switch(c.label){case 0:if(e=n.extra,a=n.getState,t=n.rejectWithValue,o=h(a()),(l=function(e){if(!e)return[r.NO_DATA];var n=e.firstname,a=e.lastname,t=e.age,o=e.country,l=[];return n&&a||l.push(r.INCORRECT_USER_DATA),t&&Number.isInteger(t)||l.push(r.INCORRECT_AGE),o||l.push(r.INCORRECT_COUNTRY),l}(o)).length)return[2,t(l)];c.label=1;case 1:return c.trys.push([1,3,,4]),[4,e.api.put("/profile",o)];case 2:if(!(i=c.sent()).data)throw new Error("error");return[2,i.data];case 3:return u=c.sent(),console.log(u),[2,t([r.SERVER_ERROR])];case 4:return[2]}}))},new((o=void 0)||(o=Promise))((function(e,n){function r(e){try{u(l.next(e))}catch(e){n(e)}}function i(e){try{u(l.throw(e))}catch(e){n(e)}}function u(n){var a;n.done?e(n.value):(a=n.value,a instanceof o?a:new o((function(e){e(a)}))).then(r,i)}u((l=l.apply(a,t||[])).next())}));var a,t,o,l})),y=function(){return y=Object.assign||function(e){for(var n,a=1,r=arguments.length;a<r;a++)for(var t in n=arguments[a])Object.prototype.hasOwnProperty.call(n,t)&&(e[t]=n[t]);return e},y.apply(this,arguments)},C=(0,v.oM)({name:"profile",initialState:{data:void 0,isLoading:!1,readonly:!0,error:void 0},reducers:{setReadOnly:function(e,n){e.readonly=n.payload},cancelEdit:function(e){e.readonly=!0,e.form=e.data,e.validateError=void 0},updateProfile:function(e,n){e.form=y(y({},e.form),n.payload)}},extraReducers:function(e){e.addCase(p.pending,(function(e){e.error=void 0,e.isLoading=!0})).addCase(p.fulfilled,(function(e,n){e.isLoading=!1,e.data=n.payload,e.form=n.payload})).addCase(p.rejected,(function(e,n){e.isLoading=!1,e.error=n.payload})),e.addCase(m.pending,(function(e){e.validateError=void 0,e.isLoading=!0})).addCase(m.fulfilled,(function(e,n){e.isLoading=!1,e.data=n.payload,e.form=n.payload,e.readonly=!0})).addCase(m.rejected,(function(e,n){e.isLoading=!1,e.validateError=n.payload}))}}),g=C.actions,R=C.reducer,b=function(e){var n;return null===(n=e.profile)||void 0===n?void 0:n.error},E=function(e){var n;return null===(n=e.profile)||void 0===n?void 0:n.isLoading},x=function(e){var n;return null===(n=e.profile)||void 0===n?void 0:n.readonly},N=function(e){var n;return null===(n=e.profile)||void 0===n?void 0:n.validateError},O=a(6904),A=a(8077);var j,I=(0,o.memo)((function(e){var n=e.avatarUrl,a=e.alt,r=void 0===a?"":a,i=e.size,u=void 0===i?150:i,c=e.className,s=(0,o.useMemo)((function(){return{width:u,height:u}}),[u]);return(0,t.jsx)("img",{className:(0,l.A)("p_sdRGRx",{},[c]),src:n,alt:r,style:s})}));!function(e){e.RUSSIA="Russia",e.CHINE="Chine",e.JAPAN="Japan",e.ARMENIA="Armenia",e.UAE="UAE"}(j||(j={}));var w,T=(0,o.memo)((function(e){var n=e.className,a=e.label,r=e.options,i=e.onChange,u=e.readOnly,c=e.value,s=(0,o.useMemo)((function(){return null==r?void 0:r.map((function(e){return(0,t.jsx)("option",{className:"X3B85bfG",value:e.value,children:e.label},e.value)}))}),[r]);return(0,t.jsxs)("div",{className:(0,l.A)("aLAk0GSE",{},[n]),children:[a&&(0,t.jsx)("span",{className:"eCrNkYWC",children:"".concat(a,">")}),(0,t.jsx)("select",{className:"XMaHpDgJ",value:c,onChange:function(e){null==i||i(e.target.value)},disabled:u,children:s})]})})),U=[{label:j.ARMENIA,value:j.ARMENIA},{label:j.CHINE,value:j.CHINE},{label:j.JAPAN,value:j.JAPAN},{label:j.RUSSIA,value:j.RUSSIA},{label:j.UAE,value:j.UAE}],S=function(e){var n=e.value,a=void 0===n?j.RUSSIA:n,r=e.className,i=e.onChange,u=e.readOnly,c=void 0!==u&&u,s=(0,f.$G)("profile").t,d=(0,o.useCallback)((function(e){null==i||i(e)}),[i]);return(0,t.jsx)(T,{label:s("inputs.country"),options:U,className:(0,l.A)(r),onChange:d,readOnly:c,value:a})};!function(e){e.RUB="RUB",e.EUR="EUR",e.USD="USD"}(w||(w={}));var k=[{label:w.RUB,value:w.RUB},{label:w.EUR,value:w.EUR},{label:w.USD,value:w.USD}],P=(0,o.memo)((function(e){var n=e.value,a=void 0===n?w.RUB:n,r=e.className,i=e.onChange,u=e.readOnly,c=void 0!==u&&u,s=(0,f.$G)("profile").t,d=(0,o.useCallback)((function(e){null==i||i(e)}),[i]);return(0,t.jsx)(T,{label:s("inputs.currency"),options:k,className:(0,l.A)(r),onChange:d,readOnly:c,value:a})}));const _="HdvXGLOd";var G=function(e){var n,a=e.className,r=e.data,o=e.isLoading,i=e.error,u=e.onChangeFirstname,c=e.onChangeLastname,v=e.readOnly,p=void 0!==v&&v,h=e.onChangeAge,m=e.onChangeCity,y=e.onChangeUsername,C=e.onChangeAvatar,g=e.onChangeCurrency,R=e.onChangeCountry,b=(0,f.$G)("profile").t,E=(0,f.$G)().t,x=((n={}).fPqIqrOK=!p,n);return o?(0,t.jsx)("div",{className:(0,l.A)(_,{},[a,"t0z47uTC"]),children:(0,t.jsx)(A.a,{})}):i?(0,t.jsx)("div",{className:(0,l.A)(_,{},[a,"iF4ykMZ3"]),children:(0,t.jsx)(s.x,{title:b("errors.loadingError"),text:E("updatePage"),theme:d.lg.ERROR,align:d.PH.CENTER})}):(0,t.jsxs)("div",{className:(0,l.A)(_,x,[a]),children:[(null==r?void 0:r.avatar)&&(0,t.jsx)("div",{className:"hw4CftKA",children:(0,t.jsx)(I,{avatarUrl:null==r?void 0:r.avatar})}),(0,t.jsxs)("div",{className:"tdZ7p2w0",children:[(0,t.jsx)(O.I,{value:null==r?void 0:r.firstname,placeholder:b("inputs.firstname"),onChange:u,readOnly:p}),(0,t.jsx)(O.I,{value:null==r?void 0:r.lastname,placeholder:b("inputs.lastname"),onChange:c,readOnly:p}),(0,t.jsx)(O.I,{value:null==r?void 0:r.age,type:"number",placeholder:b("inputs.age"),onChange:h,readOnly:p}),(0,t.jsx)(O.I,{value:null==r?void 0:r.city,placeholder:b("inputs.city"),onChange:m,readOnly:p}),(0,t.jsx)(O.I,{value:null==r?void 0:r.username,placeholder:b("inputs.username"),onChange:y,readOnly:p}),(0,t.jsx)(O.I,{value:null==r?void 0:r.avatar,placeholder:b("inputs.avatar"),onChange:C,readOnly:p}),(0,t.jsx)(P,{value:null==r?void 0:r.currency,onChange:g,readOnly:p}),(0,t.jsx)(S,{value:null==r?void 0:r.country,onChange:R,readOnly:p})]})]})},D=a(1284);const L={header:"w0iJYgda",buttons:"lDoGc86I"};var M=function(e){var n=e.className,a=(0,f.$G)("profile").t,r=(0,f.$G)().t,i=(0,c.v9)(x),d=(0,u.T)(),v=(0,o.useCallback)((function(){d(g.setReadOnly(!1))}),[d]),p=(0,o.useCallback)((function(){d(g.cancelEdit())}),[d]),h=(0,o.useCallback)((function(){d(m()),p()}),[d,p]);return(0,t.jsxs)("div",{className:(0,l.A)(n,{},[L.header]),children:[(0,t.jsx)(s.x,{title:a("profile")}),(0,t.jsx)("div",{className:L.buttons,children:i?(0,t.jsx)(D.z,{theme:D.b.OUTLINE,className:L.editBtn,onClick:v,children:r("common.edit")}):(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(D.z,{theme:D.b.OUTLINE_RED,onClick:p,children:r("common.cancel")}),(0,t.jsx)(D.z,{theme:D.b.OUTLINE,onClick:h,children:r("common.save")})]})})]})},B={profile:R};const F=(0,o.memo)((function(e){var n,a=e.className,v=(0,c.v9)(h),m=(0,c.v9)(E),y=(0,c.v9)(b),C=(0,c.v9)(x),R=(0,c.v9)(N),O=(0,u.T)(),A=(0,f.$G)("profile").t,j=((n={})[r.INCORRECT_AGE]=A("errors.serverError"),n[r.INCORRECT_COUNTRY]=A("errors.incorrectRegion"),n[r.INCORRECT_USER_DATA]=A("errors.noData"),n[r.NO_DATA]=A("errors.incorrectUserData"),n[r.SERVER_ERROR]=A("errors.incorrectAge"),n),I=(0,o.useCallback)((function(e){O(g.updateProfile({firstname:e}))}),[O]),w=(0,o.useCallback)((function(e){O(g.updateProfile({lastname:e}))}),[O]),T=(0,o.useCallback)((function(e){O(g.updateProfile({age:Number(e)}))}),[O]),U=(0,o.useCallback)((function(e){O(g.updateProfile({city:e}))}),[O]),S=(0,o.useCallback)((function(e){O(g.updateProfile({username:e}))}),[O]),k=(0,o.useCallback)((function(e){O(g.updateProfile({avatar:e}))}),[O]),P=(0,o.useCallback)((function(e){O(g.updateProfile({currency:e}))}),[O]),_=(0,o.useCallback)((function(e){O(g.updateProfile({country:e}))}),[O]);return(0,o.useEffect)((function(){O(p())}),[O]),(0,t.jsx)(i.W,{reducers:B,removeAfterUnmount:!0,children:(0,t.jsxs)("div",{className:(0,l.A)(a),children:[(0,t.jsx)(M,{}),null==R?void 0:R.map((function(e){return(0,t.jsx)(s.x,{theme:d.lg.ERROR,text:j[e]},e)})),(0,t.jsx)(G,{data:v,isLoading:m,error:y,onChangeFirstname:I,onChangeLastname:w,readOnly:C,onChangeAge:T,onChangeCity:U,onChangeUsername:S,onChangeAvatar:k,onChangeCurrency:P,onChangeCountry:_})]})})}))},9698:(e,n,a)=>{a.d(n,{xv:()=>c,PH:()=>u,lg:()=>i});var r=a(5893),t=a(3409),o=a(7294);const l={title:"ZPL2l4rB",text:"DB_GRCQO",error:"GHDg1TxB",left:"Z5ZGY2Ah",right:"vZ7RuwEM",center:"KK8e4LEn"};var i,u;!function(e){e.PRIMARY="primary",e.ERROR="error"}(i||(i={})),function(e){e.RIGHT="right",e.LEFT="left",e.CENTER="center"}(u||(u={}));var c=(0,o.memo)((function(e){var n,a=e.className,o=e.title,c=e.text,s=e.theme,d=void 0===s?i.PRIMARY:s,f=e.align,v=void 0===f?u.LEFT:f,p=((n={})[l[d]]=!0,n);return(0,r.jsxs)("div",{className:(0,t.A)(l.Text,p,[a,l[v]]),children:[o&&(0,r.jsx)("p",{className:(0,t.A)(l.title),children:o}),c&&(0,r.jsx)("p",{className:(0,t.A)(l.text),children:c})]})}))},933:(e,n,a)=>{a.d(n,{W:()=>o});var r=a(7294),t=a(5998),o=function(e){var n=e.reducers,a=e.removeAfterUnmount,o=e.children,l=(0,t.oR)(),i=(0,t.I0)();return(0,r.useEffect)((function(){return Object.entries(n).forEach((function(e){var n=e[0],a=e[1];l.reducerManager.add(n,a),i({type:"@INIT ".concat(n," reducer")})})),function(){a&&Object.entries(n).forEach((function(e){var n=e[0];l.reducerManager.remove(n),i({type:"@DESTROY ".concat(n," reducer")})}))}}),[]),o}},3115:(e,n,a)=>{a.d(n,{T:()=>t});var r=a(5998),t=function(){return(0,r.I0)()}},6904:(e,n,a)=>{a.d(n,{I:()=>i});var r=a(5893),t=a(3409),o=a(7294);var l=function(){return l=Object.assign||function(e){for(var n,a=1,r=arguments.length;a<r;a++)for(var t in n=arguments[a])Object.prototype.hasOwnProperty.call(n,t)&&(e[t]=n[t]);return e},l.apply(this,arguments)},i=(0,o.memo)((function(e){var n,a=e.className,i=e.value,u=e.onChange,c=e.type,s=void 0===c?"text":c,d=e.placeholder,f=void 0===d?"":d,v=e.autoFocus,p=e.readOnly,h=void 0!==p&&p,m=function(e,n){var a={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&n.indexOf(r)<0&&(a[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var t=0;for(r=Object.getOwnPropertySymbols(e);t<r.length;t++)n.indexOf(r[t])<0&&Object.prototype.propertyIsEnumerable.call(e,r[t])&&(a[r[t]]=e[r[t]])}return a}(e,["className","value","onChange","type","placeholder","autoFocus","readOnly"]),y=(0,o.useState)(!1),C=y[0],g=y[1],R=(0,o.useState)(0),b=R[0],E=R[1],x=(0,o.useRef)(null),N=C&&!h,O=((n={}).mcKuGwcy=h,n);return(0,o.useEffect)((function(){var e;v&&(g(!0),null===(e=x.current)||void 0===e||e.focus())}),[v]),(0,r.jsxs)("div",{className:(0,t.A)("VX8Pm6_6",{},[a]),children:[f&&(0,r.jsx)("div",{className:"oGFZbMJ2",children:"".concat(f,">")}),(0,r.jsxs)("div",{className:"agQgHWgM",children:[(0,r.jsx)("input",l({ref:x,className:(0,t.A)("tccwsuf_",O),type:s,value:i,onChange:function(e){null==u||u(e.target.value),E(e.target.value.length)},onBlur:function(){g(!1)},onFocus:function(){g(!0)},onSelect:function(e){var n,a;E(null!==(a=null===(n=null==e?void 0:e.target)||void 0===n?void 0:n.selectionStart)&&void 0!==a?a:0)},readOnly:h},m)),N&&(0,r.jsx)("div",{className:"vFWyRiHW",style:{left:"".concat(9*b,"px")}})]})]})}))},5161:(e,n,a)=>{a.d(n,{x:()=>r.xv});var r=a(9698)}}]);